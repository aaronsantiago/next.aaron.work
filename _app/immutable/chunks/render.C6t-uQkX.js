import{ac as D,y as I,K as V,ad as E,I as L,ae as M,a4 as k,af as T,V as m,M as S,a as H,d as y,W as Y,ag as P,ah as W,a1 as $,O as q,ai as B,c as C,a5 as K,h as b,v as j,a8 as z,f as F}from"./runtime.Bv6RX7Ze.js";import{b as G}from"./template.C59rNYNe.js";const J=new Set,N=new Set;function v(r){var R;var a=this,i=a.ownerDocument,c=r.type,o=((R=r.composedPath)==null?void 0:R.call(r))||[],e=o[0]||r.target,f=0,l=r.__root;if(l){var d=o.indexOf(l);if(d!==-1&&(a===document||a===window)){r.__root=a;return}var u=o.indexOf(a);if(u===-1)return;d<=u&&(f=d)}if(e=o[f]||r.target,e!==a){D(r,"currentTarget",{configurable:!0,get(){return e||i}});try{for(var _,t=[];e!==null;){var s=e.parentNode||e.host||null;try{var n=e["__"+c];if(n!==void 0&&!e.disabled)if(I(n)){var[g,...p]=n;g.apply(e,[r,...p])}else n.call(e,r)}catch(w){_?t.push(w):_=w}if(r.cancelBubble||s===a||s===null)break;e=s}if(_){for(let w of t)queueMicrotask(()=>{throw w});throw _}}finally{r.__root=a,delete r.currentTarget}}}const Q=["wheel","mousewheel","touchstart","touchmove"];function U(r){return Q.includes(r)}function rr(r,a){a!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=a,r.nodeValue=a==null?"":a+"")}function X(r,a){const i=a.anchor??a.target.appendChild(V());return A(r,{...a,anchor:i})}function ar(r,a){E(),a.intro=a.intro??!1;const i=a.target,c=b,o=y;try{for(var e=L(i);e&&(e.nodeType!==8||e.data!==M);)e=k(e);if(!e)throw T;m(!0),S(e),H();const f=A(r,{...a,anchor:e});if(y===null||y.nodeType!==8||y.data!==Y)throw P(),T;return m(!1),f}catch(f){if(f===T)return a.recover===!1&&W(),E(),$(i),m(!1),X(r,a);throw f}finally{m(c),S(o)}}const h=new Map;function A(r,{target:a,anchor:i,props:c={},events:o,context:e,intro:f=!0}){E();var l=new Set,d=t=>{for(var s=0;s<t.length;s++){var n=t[s];if(!l.has(n)){l.add(n);var g=U(n);a.addEventListener(n,v,{passive:g});var p=h.get(n);p===void 0?(document.addEventListener(n,v,{passive:g}),h.set(n,1)):h.set(n,p+1)}}};d(q(J)),N.add(d);var u=void 0,_=B(()=>(C(()=>{if(e){K({});var t=F;t.c=e}o&&(c.$$events=o),b&&G(i,null),u=r(i,c)||{},b&&(j.nodes_end=y),e&&z()}),()=>{for(var t of l){a.removeEventListener(t,v);var s=h.get(t);--s===0?(document.removeEventListener(t,v),h.delete(t)):h.set(t,s)}N.delete(d),O.delete(u)}));return O.set(u,_),u}let O=new WeakMap;function er(r){const a=O.get(r);a&&a()}export{ar as h,X as m,rr as s,er as u};
